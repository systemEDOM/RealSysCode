{"version":3,"sources":["../../src/repositories/SnippetRepository.js"],"names":["SnippetRepository","constructor","model","create","snippetObject","snippet","UserRepository","findOneAndUpdate","_id","user","$push","snippets","new","findBySlug","slug","findOne","findById","id","callback","Snippet"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAGA,MAAMA,iBAAN,CAAwB;AAEpBC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,SAAKA,KAAL,GAAaA,KAAb;AACH;;AAED,QAAMC,MAAN,CAAaC,aAAb,EAA4B;AACxB,UAAMC,OAAO,GAAG,MAAM,KAAKH,KAAL,CAAWC,MAAX,CAAkBC,aAAlB,CAAtB;AACA,UAAME,wBAAeC,gBAAf,CAAgC;AAAEC,MAAAA,GAAG,EAAEJ,aAAa,CAACK;AAArB,KAAhC,EAA6D;AAACC,MAAAA,KAAK,EAAE;AAACC,QAAAA,QAAQ,EAAEN,OAAO,CAACG;AAAnB;AAAR,KAA7D,EAA+F;AAAEI,MAAAA,GAAG,EAAE;AAAP,KAA/F,CAAN;AACA,WAAOP,OAAP;AACH;;AAED,QAAME,gBAAN,CAAuBC,GAAvB,EAA4BJ,aAA5B,EAA2C;AACvC,WAAO,MAAM,KAAKF,KAAL,CAAWK,gBAAX,CAA4B;AAAEC,MAAAA;AAAF,KAA5B,EAAqCJ,aAArC,CAAb;AACH;;AAED,QAAMS,UAAN,CAAiBC,IAAjB,EAAuB;AACnB,WAAO,MAAM,KAAKZ,KAAL,CAAWa,OAAX,CAAmB;AAAED,MAAAA;AAAF,KAAnB,CAAb;AACH;;AAED,QAAME,QAAN,CAAeC,EAAf,EAAmBC,QAAnB,EAA6B;AACzB,WAAO,MAAM,KAAKhB,KAAL,CAAWc,QAAX,CAAoBC,EAApB,CAAb;AACH;;AAtBmB;;eAyBT,IAAIjB,iBAAJ,CAAsBmB,gBAAtB,C","sourcesContent":["import Snippet from '../schema/snippet.schema';\r\nimport UserRepository from './UserRepository';\r\nimport User from '../schema/user.schema';\r\n\r\n\r\nclass SnippetRepository {\r\n\r\n    constructor(model) {\r\n        this.model = model;\r\n    }\r\n\r\n    async create(snippetObject) {\r\n        const snippet = await this.model.create(snippetObject)\r\n        await UserRepository.findOneAndUpdate({ _id: snippetObject.user }, {$push: {snippets: snippet._id}}, { new: true });\r\n        return snippet;\r\n    }\r\n\r\n    async findOneAndUpdate(_id, snippetObject) {\r\n        return await this.model.findOneAndUpdate({ _id }, snippetObject);\r\n    }\r\n\r\n    async findBySlug(slug) {\r\n        return await this.model.findOne({ slug });\r\n    }\r\n\r\n    async findById(id, callback) {\r\n        return await this.model.findById(id);\r\n    }\r\n}\r\n\r\nexport default new SnippetRepository(Snippet);"],"file":"SnippetRepository.js"}